<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ plan.name }} - Practice Plan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @media print {
            .no-print { display: none; }
            body { padding: 0; }
        }
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .header {
            border-bottom: 3px solid #2c5f8d;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .drill-section {
            page-break-inside: avoid;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }
        .drill-header {
            background: #f8f9fa;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-bottom: 2px solid #dee2e6;
            border-radius: 5px 5px 0 0;
        }
        .drill-diagram {
            max-width: 300px;
            max-height: 300px;
            margin: 10px 0;
        }
        .team-colors {
            background: linear-gradient(135deg, #2c5f8d 0%, #d4a574 100%);
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="no-print text-end mb-3">
        <button onclick="window.print()" class="btn btn-primary">
            <i class="bi bi-printer"></i> Print
        </button>
        <a href="{{ url_for('main.practice_plan_detail', plan_id=plan.id) }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back
        </a>
    </div>

    <div class="team-colors">
        <h1>{{ plan.team.name }}</h1>
        <h2>{{ plan.name }}</h2>
    </div>

    <div class="header">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Date:</strong> {{ plan.practice_date.strftime('%B %d, %Y') if plan.practice_date else 'Not set' }}</p>
                <p><strong>Duration:</strong> {{ plan.duration_minutes }} minutes</p>
            </div>
            <div class="col-md-6">
                <p><strong>Focus Areas:</strong> {{ plan.focus_areas or 'General' }}</p>
                <p><strong>Total Drills:</strong> {{ plan.drills_count }}</p>
            </div>
        </div>
        {% if plan.notes %}
        <div class="alert alert-info mt-3">
            <strong>Coach Notes:</strong><br>
            {{ plan.notes }}
        </div>
        {% endif %}
    </div>

    <h3>Practice Activities</h3>

    {% for plan_drill in plan.plan_drills|sort(attribute='order') %}
    <div class="drill-section">
        <div class="drill-header">
            <h4 class="mb-0">
                {{ loop.index }}. {{ plan_drill.drill.name }}
                <span class="badge bg-primary float-end">{{ plan_drill.duration_minutes }} min</span>
            </h4>
        </div>

        <div class="row">
            <div class="col-md-8">
                <p><strong>Category:</strong> {{ plan_drill.drill.category }}</p>
                <p><strong>Description:</strong> {{ plan_drill.drill.description }}</p>

                {% if plan_drill.drill.equipment_needed %}
                <p><strong>Equipment:</strong> {{ plan_drill.drill.equipment_needed }}</p>
                {% endif %}

                <p><strong>Players:</strong> {{ plan_drill.drill.min_players }} - {{ plan_drill.drill.max_players }}</p>

                {% if plan_drill.notes %}
                <div class="alert alert-warning mt-2">
                    <strong>Session Notes:</strong> {{ plan_drill.notes }}
                </div>
                {% endif %}
            </div>

            {% if plan_drill.drill.diagram_url %}
            <div class="col-md-4 text-center">
                <img src="{{ plan_drill.drill.diagram_url }}" alt="{{ plan_drill.drill.name }} diagram" class="drill-diagram img-fluid">
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}

    <div class="mt-4 text-muted text-center no-print">
        <small>Generated by Soccer Practice Planner</small>
    </div>
</body>
</html>
