{% extends "base.html" %}

{% block title %}Import Drills - Soccer Practice Planner{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col">
            <h1>Import Drills from CSV</h1>
            <p class="text-muted">Bulk import drills from a CSV file. Download the template to see the required format.</p>
        </div>
    </div>

    <!-- Instructions Card -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">How to Import Drills</h5>
        </div>
        <div class="card-body">
            <ol>
                <li><strong>Download the CSV template</strong> by clicking the button below</li>
                <li><strong>Open the template</strong> in Excel, Google Sheets, or any spreadsheet application</li>
                <li><strong>Fill in your drill information</strong> following the example rows provided</li>
                <li><strong>Save as CSV</strong> (not XLSX or other formats)</li>
                <li><strong>Upload the file</strong> using the form below</li>
            </ol>

            <div class="alert alert-info mb-0">
                <strong>Note:</strong> Drills with duplicate names will be automatically skipped.
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Download Template Section -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Step 1: Download Template</h5>
                </div>
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <i class="bi bi-file-earmark-arrow-down" style="font-size: 4rem; color: var(--primary-color);"></i>
                    <p class="mt-3">Download the CSV template with example drills</p>
                    <a href="{{ url_for('main.download_import_template') }}" class="btn btn-primary btn-lg">
                        <i class="bi bi-download"></i> Download Template
                    </a>
                </div>
            </div>
        </div>

        <!-- Upload File Section -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Step 2: Upload Completed CSV</h5>
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="file" class="form-label">Select CSV File</label>
                            <input type="file" class="form-control" id="file" name="file" accept=".csv" required>
                            <div class="form-text">Only CSV files are accepted</div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="bi bi-upload"></i> Upload and Import
                            </button>
                        </div>
                    </form>

                    <hr>

                    <div class="alert alert-warning mb-0">
                        <strong>CSV Format Requirements:</strong>
                        <ul class="mb-0 mt-2">
                            <li><code>name</code> - Required, must be unique</li>
                            <li><code>category</code> - Required (Technical, Tactical, Physical, Game, Fun)</li>
                            <li><code>description</code> - Required</li>
                            <li><code>sub_category</code> - Optional (Passing, Shooting, etc.)</li>
                            <li><code>equipment_needed</code> - Optional</li>
                            <li><code>min_players</code>, <code>max_players</code> - Optional numbers</li>
                            <li><code>recommended_age_groups</code> - Optional (e.g., "U9,U10,U11")</li>
                            <li><code>skill_level</code> - Optional (Beginner, Intermediate, Advanced, All)</li>
                            <li><code>duration_minutes</code> - Optional number</li>
                            <li><code>focus_areas</code> - Optional (comma-separated)</li>
                            <li><code>diagram_url</code> - Optional URL to drill diagram</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="row mt-3">
        <div class="col">
            <a href="{{ url_for('main.drills') }}" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Back to Drills
            </a>
        </div>
    </div>
</div>
{% endblock %}
